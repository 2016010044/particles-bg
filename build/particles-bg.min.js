!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react"),require("prop-types"),require("proton-engine"),require("raf-manager"),require("react-waypoint")):"function"==typeof define&&define.amd?define(["react","prop-types","proton-engine","raf-manager","react-waypoint"],t):e["particles-bg"]=t(e.React,e.PropTypes,e.Proton,e.RAFManager,e.reactWaypoint)}(this,function(e,t,y,i,o){"use strict";var a="default"in e?e.default:e;t=t&&t.hasOwnProperty("default")?t.default:t,y=y&&y.hasOwnProperty("default")?y.default:y,i=i&&i.hasOwnProperty("default")?i.default:i;var r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),d=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},h=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},n=function(){function e(){r(this,e),this.list=[]}return s(e,[{key:"set",value:function(e,t){this.list.push({probability:e,target:t,a:0,b:1}),this.calculation()}},{key:"calculation",value:function(){for(var e=0,t=0;t<this.list.length;t++)e+=this.list[t].probability;for(var n=0;n<this.list.length;n++){var i=this.list[n],o=i.probability/e;i.a=0===n?0:this.list[n-1].b,i.b=i.a+o}}},{key:"getResult",value:function(){for(var e=Math.random(),t=0;t<this.list.length;t++){var n=this.list[t];if(e<=n.b&&e>n.a)return n.target}return this.list[0].target}}]),e}(),u=function(e){function n(e){r(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.size={width:0,height:0},t.canvasRef=a.createRef(),t}return d(n,e),s(n,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.initCanvas(),e.resize=e.resize.bind(e),window.addEventListener("resize",e.resize)},100);var t=this.canvasRef.current;this.props.onCanvasDidMount&&this.props.onCanvasDidMount(t)}},{key:"initCanvas",value:function(){var e=this.canvasRef.current;this.props.globalCompositeOperation&&(e.getContext("2d").globalCompositeOperation=this.props.globalCompositeOperation);var t=this.setCanvasSize(e),n=t.width,i=t.height;this.heartbeatDetectionCanvasSize(e),this.props.onCanvasInited(e,n,i)}},{key:"heartbeatDetectionCanvasSize",value:function(i){var o=this;setInterval(function(){if(o.canvasRef.current.clientHeight!==o.size.height){var e=o.setCanvasSize(i),t=e.width,n=e.height;o.props.onResize&&o.props.onResize(t,n)}},100)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resize)}},{key:"resize",value:function(){var e=this.canvasRef.current,t=this.setCanvasSize(e),n=t.width,i=t.height;this.props.onResize&&this.props.onResize(n,i)}},{key:"setCanvasSize",value:function(e){var t=this.canvasRef.current.clientWidth,n=this.canvasRef.current.clientHeight;return this.size.width=t,this.size.height=n,{width:e.width=t,height:e.height=n}}},{key:"handleWaypointEnter",value:function(){i.start()}},{key:"handleWaypointLeave",value:function(){i.stop()}},{key:"render",value:function(){return a.createElement(o.Waypoint,{onEnter:this.handleWaypointEnter,onLeave:this.handleWaypointLeave},a.createElement("canvas",{ref:this.canvasRef,style:{width:"100%",height:"100%"}}))}}]),n}(a.Component),l=function(e){function t(e){return r(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return d(t,e),s(t,[{key:"onCanvasInited",value:function(e,t,n){this.createProton(e,t,n),this.createMiniEmitter(e),i.add(this.renderProton)}},{key:"componentWillUnmount",value:function(){try{i.remove(this.renderProton),this.proton.destroy()}catch(e){}}},{key:"onResize",value:function(){}},{key:"createProton",value:function(e,t,n){var i=e.getContext("2d");this.proton=new y;var o=new y.Emitter;o.rate=new y.Rate(this.props.num?new y.Span(this.props.num):new y.Span(4,9),new y.Span(.8,1.3)),o.addInitialize(new y.Mass(1)),o.addInitialize(new y.Radius(1,50)),o.addInitialize(new y.Life(5,6)),o.addInitialize(new y.Velocity(new y.Span(5,8),new y.Span(30,70),"polar")),o.addBehaviour(new y.Alpha(1,0)),o.addBehaviour(new y.Color(["#36aaf3","#fd769c","#94ff22","#ffa545","#ffffff"])),o.addBehaviour(new y.Scale(.7,1)),o.addBehaviour(new y.Gravity(3)),o.addBehaviour(new y.Collision(o)),o.addBehaviour(this.customDeadBehaviour(e)),o.addBehaviour(new y.CrossZone(new y.RectZone(0,0,e.width,e.height),"bound")),o.p.x=Math.min(500,Math.max(e.width/2-400,50)),o.p.y=e.height/2+50,o.emit(),this.proton.addEmitter(o);var a=new y.CanvasRenderer(e);a.onProtonUpdate=function(){i.fillStyle="rgba(0, 122, 197, 0.2)",i.fillRect(0,0,e.width,e.height)},this.proton.addRenderer(a)}},{key:"customDeadBehaviour",value:function(t){var n=this;return{initialize:function(e){},applyBehaviour:function(e){e.p.y+e.radius>=t.height&&9<e.radius&&(n.miniEmitteing(e),e.dead=!0)}}}},{key:"createMiniEmitter",value:function(e){var t=new y.Emitter;t.rate=new y.Rate(new y.Span(3,6),new y.Span(1,2)),t.addInitialize(new y.Mass(1)),t.radiusInitialize=new y.Radius,t.addInitialize(t.radiusInitialize),t.addInitialize(new y.Life(.5,1)),t.addInitialize(new y.V(new y.Span(1.5,3),new y.Span(0,70,!0),"polar")),t.colorBehaviour=new y.Color("#ffffff"),t.addBehaviour(new y.Alpha(1,0)),t.addBehaviour(t.colorBehaviour),t.addBehaviour(new y.Gravity(4)),t.addBehaviour(new y.Collision(t)),t.addBehaviour(new y.CrossZone(new y.RectZone(0,0,e.width,e.height),"bound")),this.proton.addEmitter(t),this.miniEmitter=t}},{key:"miniEmitteing",value:function(e){var t=this.miniEmitter;t.radiusInitialize.reset(.05*e.radius,.2*e.radius),t.colorBehaviour.reset(e.color),t.p.x=e.p.x,t.p.y=e.p.y,t.emit("once")}},{key:"renderProton",value:function(){this.proton&&this.proton.update()}},{key:"render",value:function(){return a.createElement(u,{globalCompositeOperation:"darker",onCanvasInited:this.onCanvasInited.bind(this),onResize:this.onResize.bind(this)})}}]),t}(a.Component),c=function(e){function n(e){r(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.colors=["#529B88","#CDD180","#FFFA32","#FB6255","#FB4A53","#FF4E50","#F9D423"],t}return d(n,e),s(n,[{key:"componentWillUnmount",value:function(){try{i.remove(this.renderProton),this.proton.destroy()}catch(e){}}},{key:"onCanvasInited",value:function(e,t,n){this.createProton(e,t,n),i.add(this.renderProton)}},{key:"onResize",value:function(){}},{key:"createProton",value:function(e,t,n){this.proton=new y;var i=new y.Emitter;i.rate=new y.Rate(this.props.num?new y.Span(this.props.num):new y.Span(5,8),new y.Span(.1,.25)),i.addInitialize(new y.Mass(1)),i.addInitialize(new y.Radius(20,200)),i.addInitialize(new y.Life(2,4)),i.addInitialize(new y.Position(new y.RectZone(0,0,t,n))),i.addBehaviour(new y.Alpha(0,1,1/0,y.easeOutCubic)),i.addBehaviour(new y.Scale(1,0,1/0,y.easeOutCubic)),i.addBehaviour(new y.Color(this.colors,"random")),i.emit(),this.proton.addEmitter(i);var o=new y.CanvasRenderer(e);this.proton.addRenderer(o)}},{key:"renderProton",value:function(){this.proton&&this.proton.update()}},{key:"render",value:function(){return a.createElement(u,{globalCompositeOperation:"darker",onCanvasInited:this.onCanvasInited.bind(this),onResize:this.onResize.bind(this)})}}]),n}(a.Component),p=function(e){function t(e){return r(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return d(t,e),s(t,[{key:"componentWillUnmount",value:function(){try{i.remove(this.renderProton),this.proton.destroy()}catch(e){}}},{key:"onCanvasInited",value:function(e,t,n){this.createProton(e,t,n),i.add(this.renderProton)}},{key:"onResize",value:function(e,t){this.crossZoneBehaviour.zone.width=e,this.crossZoneBehaviour.zone.height=t,this.proton.renderers[0].resize(e,t)}},{key:"createProton",value:function(e,t,n){this.proton=new y;var i=new y.Emitter;i.damping=.008,i.rate=new y.Rate(this.props.num?this.props.num:250),i.addInitialize(new y.Mass(1)),i.addInitialize(new y.Radius(4)),i.addInitialize(new y.Velocity(new y.Span(1.5),new y.Span(0,360),"polar"));var o={x:t/2,y:n/2},a=new y.Attraction(o,0,0),r=new y.CrossZone(new y.RectZone(0,0,e.width,e.height),"cross");i.addBehaviour(new y.Color("random")),i.addBehaviour(a,r),i.addBehaviour(new y.RandomDrift(10,10,.05)),i.p.x=e.width/2,i.p.y=e.height/2,i.emit("once"),this.proton.addEmitter(i),this.proton.addRenderer(this.createRenderer(e)),this.crossZoneBehaviour=r}},{key:"createRenderer",value:function(e){var t=e.getContext("2d"),n=new y.CanvasRenderer(e);return n.onProtonUpdate=function(){t.fillStyle="rgba(0, 0, 0, 0.02)",t.fillRect(0,0,e.width,e.height)},n.onParticleUpdate=function(e){t.beginPath(),t.strokeStyle=e.color,t.lineWidth=1,t.moveTo(e.old.p.x,e.old.p.y),t.lineTo(e.p.x,e.p.y),t.closePath(),t.stroke()},n}},{key:"renderProton",value:function(){this.proton&&this.proton.update()}},{key:"render",value:function(){return a.createElement(u,{globalCompositeOperation:"darker",onCanvasInited:this.onCanvasInited.bind(this),onResize:this.onResize.bind(this)})}}]),t}(a.Component),v=function(e){function n(e){r(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.hue=0,t.index=0,t.colorTemplate="hsla(hue,80%,50%, 0.75)",t}return d(n,e),s(n,[{key:"onCanvasInited",value:function(e,t,n){this.createProton(e,t,n),i.add(this.renderProton)}},{key:"onResize",value:function(e,t){this.crossZoneBehaviour.zone.width=e,this.crossZoneBehaviour.zone.height=t,this.proton.renderers[0].resize(e,t)}},{key:"createProton",value:function(e,t,n){this.proton=new y;var i=new y.Emitter;i.damping=.008,i.rate=new y.Rate(this.props.num?this.props.num:150),i.addInitialize(new y.Mass(1)),i.addInitialize(new y.Radius(8)),i.addInitialize(new y.V(new y.Span(.1,.5),new y.Span(0,360),"polar")),i.addInitialize(new y.Position(new y.CircleZone(e.width/2,e.height/2,100)));var o=new y.CrossZone(new y.RectZone(0,0,e.width,e.height),"cross");i.addBehaviour(o),this.repulsion=new y.Repulsion({x:e.width/2,y:e.height/2-100},3,300),this.attraction=new y.Attraction({x:e.width/2,y:e.height/2},3,200),i.addBehaviour(this.attraction,this.repulsion),i.addBehaviour(new y.Color("random")),i.addBehaviour(new y.RandomDrift(20,15,.15)),i.emit("once"),this.proton.addEmitter(i),this.proton.addRenderer(this.createRenderer(e)),this.crossZoneBehaviour=o}},{key:"createRenderer",value:function(e){var i=this,o=e.getContext("2d"),t=new y.CanvasRenderer(e);return t.onProtonUpdate=function(){i.hue+=1,o.fillStyle="rgba(0, 0, 0, 0.02)",o.fillRect(0,0,e.width,e.height)},t.onParticleCreated=function(e){e.data.begin=y.MathUtil.randomAToB(1,120),e.data.tha=y.MathUtil.randomAToB(0,2*Math.PI)},t.onParticleUpdate=function(e){var t=e.data.begin+i.hue;e.color=i.colorTemplate.replace("hue",t%360);var n=.25*e.radius*Math.cos(e.data.tha+=.01)+.75*e.radius;o.beginPath(),o.fillStyle=e.color,o.arc(e.p.x,e.p.y,n,0,2*Math.PI,!0),o.closePath(),o.fill()},t}},{key:"componentWillUnmount",value:function(){try{i.remove(this.renderProton),this.proton.destroy()}catch(e){}}},{key:"renderProton",value:function(e){this.proton.update(),this.index%200==0&&(this.attraction.targetPosition.x=Math.random()*e.width,this.attraction.targetPosition.y=Math.random()*e.height,this.repulsion.targetPosition.x=Math.random()*e.width,this.repulsion.targetPosition.y=Math.random()*e.height),this.index++}},{key:"render",value:function(){return a.createElement(u,{onCanvasInited:this.onCanvasInited.bind(this),onResize:this.onResize.bind(this)})}}]),n}(a.Component),f=function(e){function n(e){r(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.colors=["#fad390","#81ecec","#ffffff","#badc58","#f9ca24","#FEA47F"],t}return d(n,e),s(n,[{key:"componentWillUnmount",value:function(){try{i.remove(this.renderProton),this.proton.destroy()}catch(e){}}},{key:"onCanvasDidMount",value:function(e){e.style.backgroundColor="#2C3A47"}},{key:"onCanvasInited",value:function(e,t,n){this.createProton(e,t,n),i.add(this.renderProton)}},{key:"onResize",value:function(e,t){this.crossZoneBehaviour.zone.width=e+300,this.crossZoneBehaviour.zone.height=t+300,this.proton.renderers[0].resize(e,t)}},{key:"createProton",value:function(e,t,n){this.proton=new y;var i=new y.Emitter;i.rate=new y.Rate(this.props.num?this.props.num:50),i.damping=0,i.addInitialize(new y.Mass(1)),i.addInitialize(new y.Radius(4,70)),i.addInitialize(new y.Velocity(new y.Span(2,10),new y.Span(0),"polar")),i.addInitialize(new y.Position(new y.LineZone(0,e.height,e.width,e.height)));var o=new y.CrossZone(new y.RectZone(-150,-150,e.width+300,e.height+300),"cross");i.addBehaviour(o),i.addBehaviour(new y.Alpha(y.getSpan(.1,.55))),i.addBehaviour(new y.Color(this.colors)),i.emit("once"),this.proton.addEmitter(i);var a=this.createRenderer(e);this.proton.addRenderer(a),this.crossZoneBehaviour=o,i.preEmit(2)}},{key:"createRenderer",value:function(e){var i=e.getContext("2d"),t=new y.CustomRenderer;return t.onProtonUpdate=function(){i.clearRect(0,0,e.width,e.height)},t.onParticleCreated=function(e){var t=e.radius||60,n=y.MathUtil.randomAToB(100,200,"int");e.data.w=t,e.data.h=n},t.onParticleUpdate=function(e){var t=e.data.w,n=e.data.h;i.save(),i.globalAlpha=e.alpha,i.fillStyle=e.color,i.translate(e.p.x,e.p.y),i.rotate(y.MathUtil.degreeTransform(e.rotation)),i.translate(-e.p.x,-e.p.y),i.beginPath(),i.rect(e.p.x-t/2,e.p.y-n/2,t,n),i.closePath(),i.fill(),i.globalAlpha=1,i.restore()},t}},{key:"renderProton",value:function(){this.proton&&this.proton.update()}},{key:"render",value:function(){return a.createElement(u,{globalCompositeOperation:"lighter",onCanvasDidMount:this.onCanvasDidMount.bind(this),onCanvasInited:this.onCanvasInited.bind(this),onResize:this.onResize.bind(this)})}}]),n}(a.Component),m=function(e){function t(e){return r(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return d(t,e),s(t,[{key:"onCanvasInited",value:function(e,t,n){this.createProton(e,t,n),i.add(this.renderProton)}},{key:"componentWillUnmount",value:function(){try{i.remove(this.renderProton),this.proton.destroy()}catch(e){}}},{key:"onResize",value:function(e,t){this.crossZoneBehaviour.zone.width=e,this.crossZoneBehaviour.zone.height=t,this.proton.renderers[0].resize(e,t)}},{key:"createProton",value:function(e,t,n){this.proton=new y;var i=new y.Emitter;i.rate=new y.Rate(this.props.num?new y.Span(this.props.num):new y.Span(100),new y.Span(.05,.2)),i.addInitialize(new y.Mass(1)),i.addInitialize(new y.Radius(1,4)),i.addInitialize(new y.Life(1/0));var o=new y.Position(new y.RectZone(0,0,t,n));i.addInitialize(o),i.addInitialize(new y.Velocity(new y.Span(.3,.6),new y.Span(0,360),"polar")),i.addBehaviour(new y.Alpha(y.getSpan(.2,.9))),i.addBehaviour(new y.Color("#ffffff")),this.crossZoneBehaviour=new y.CrossZone(new y.RectZone(0,0,t,n),"cross"),i.addBehaviour(this.crossZoneBehaviour),i.emit("once"),i.damping=0,this.proton.addEmitter(i),this.proton.addRenderer(this.createRenderer(e,i))}},{key:"createRenderer",value:function(e,s){var d=e.getContext("2d"),t=new y.CanvasRenderer(e);return t.onProtonUpdateAfter=function(){for(var e=s.particles,t=0;t<e.length;t++)for(var n=t+1;n<e.length;n++){var i=e[t],o=e[n],a=i.p.distanceTo(o.p);if(a<140){var r=.5*(1-a/140);d.strokeStyle="rgba(255,255,255,"+r+")",d.beginPath(),d.moveTo(i.p.x,i.p.y),d.lineTo(o.p.x,o.p.y),d.closePath(),d.stroke()}}},t}},{key:"renderProton",value:function(){this.proton&&this.proton.update()}},{key:"render",value:function(){return a.createElement(u,{globalCompositeOperation:"darker",onCanvasInited:this.onCanvasInited.bind(this),onResize:this.onResize.bind(this)})}}]),t}(a.Component),w=function(e){function n(e){r(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.colors=["#74b9ff","#e84393","#6c5ce7","#00b894","#fdcb6e","#006266","#1B1464"],t}return d(n,e),s(n,[{key:"componentWillUnmount",value:function(){try{i.remove(this.renderProton),this.proton.destroy()}catch(e){}}},{key:"onCanvasInited",value:function(e,t,n){this.createProton(e,t,n),i.add(this.renderProton)}},{key:"onResize",value:function(e,t){this.crossZoneBehaviour.zone.width=e,this.crossZoneBehaviour.zone.height=t,this.proton.renderers[0].resize(e,t)}},{key:"createProton",value:function(e,t,n){this.proton=new y;var i=new y.Emitter;i.rate=new y.Rate(this.props.num||20),i.damping=.008,i.addInitialize(new y.Mass(1)),i.addInitialize(new y.Radius(30,600)),i.addInitialize(new y.Velocity(new y.Span(.5),new y.Span(0,360),"polar")),i.addInitialize(new y.Position(new y.RectZone(0,0,e.width,e.height)));var o=new y.CrossZone(new y.RectZone(0,0,e.width,e.height),"cross");i.addBehaviour(o),i.addBehaviour(new y.Alpha(y.getSpan(.35,.55))),i.addBehaviour(new y.Color(this.colors,"random")),i.addBehaviour(new y.RandomDrift(50,50,.5)),i.emit("once"),this.proton.addEmitter(i);var a=new y.CanvasRenderer(e);this.proton.addRenderer(a),this.crossZoneBehaviour=o}},{key:"renderProton",value:function(){this.proton&&this.proton.update()}},{key:"render",value:function(){return a.createElement(u,{globalCompositeOperation:"darken",onCanvasInited:this.onCanvasInited.bind(this),onResize:this.onResize.bind(this)})}}]),n}(a.Component),g=function(e){function t(e){return r(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return d(t,e),s(t,[{key:"onCanvasDidMount",value:function(e){e.style.backgroundColor="#192a56"}},{key:"onCanvasInited",value:function(e,t,n){this.createProton(e,t,n),this.renderProton()}},{key:"onResize",value:function(e,t){this.crossZoneBehaviour.zone.width=e,this.crossZoneBehaviour.zone.height=t,this.proton.renderers[0].resize(e,t)}},{key:"createProton",value:function(e,t,n){this.proton=new y;var i=new y.Emitter;i.damping=.008,i.rate=new y.Rate(this.props.num?this.props.num:50),i.addInitialize(new y.Mass(1)),i.addInitialize(new y.Radius(5,9)),i.addInitialize(new y.Velocity(new y.Span(1.5),new y.Span(0,360),"polar")),i.addInitialize(new y.Position(new y.RectZone(0,0,t,n)));var o={x:t/2,y:n/2},a=new y.Attraction(o,0,0),r=new y.CrossZone(new y.RectZone(0,0,e.width,e.height),"bound");i.addBehaviour(new y.Color("#bbb")),i.addBehaviour(a,r),i.addBehaviour(new y.RandomDrift(15,15,.05)),i.emit("once"),this.proton.addEmitter(i),this.proton.addRenderer(this.createRenderer(e)),this.crossZoneBehaviour=r}},{key:"createRenderer",value:function(e){var a=e.getContext("2d"),t=new y.CanvasRenderer(e);t.onProtonUpdate=function(){a.clearRect(0,0,e.width,e.height)},t.onParticleCreated=function(e){e.data.points=[],e.data.index=0},t.onParticleUpdate=function(e){o(e),e.data.index%8==0&&n(e),i(e),e.data.index++};var n=function(e){e.data.points.unshift(e.p.y),e.data.points.unshift(e.p.x),10<e.data.points.length&&(e.data.points.pop(),e.data.points.pop())},i=function(e){a.fillStyle=e.color,a.beginPath(),a.arc(e.p.x,e.p.y,e.radius,0,2*Math.PI,!0),a.closePath(),a.fill()},o=function(e){a.beginPath(),a.strokeStyle=e.color,a.moveTo(e.p.x,e.p.y);for(var t=e.data.points.length,n=0;n<t;n+=2){var i=e.data.points[n],o=e.data.points[n+1];a.lineWidth=r(n,t),a.lineTo(i,o),a.stroke()}},r=function(e,t){if(t<=2)return 1;var n=5/(2/t-1),i=n*((e+2)/t)+(1-n);return i>>=0};return t}},{key:"renderProton",value:function(){var e=this;i.add(function(){e.proton.update()})}},{key:"render",value:function(){return a.createElement(u,{globalCompositeOperation:"darker",onCanvasDidMount:this.onCanvasDidMount.bind(this),onCanvasInited:this.onCanvasInited.bind(this),onResize:this.onResize.bind(this)})}}]),t}(a.Component),R=["#f6b93b","#18dcff","#cd84f1","#ED4C67","#ffffff","#b71540","#32ff7e","#ff3838"],C=function(e){function t(e){return r(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return d(t,e),s(t,[{key:"onCanvasInited",value:function(e,t,n){this.createProton(e),this.createEmitter({canvas:e,x:t/2,y:n/2,mainEmitter:!0,zone:"bound"}),i.add(this.renderProton)}},{key:"componentWillUnmount",value:function(){try{i.remove(this.renderProton),this.proton.destroy()}catch(e){}}},{key:"onResize",value:function(){}},{key:"createProton",value:function(e){this.proton=new y;var t=this.createRenderer(e);this.proton.addRenderer(t)}},{key:"createRenderer",value:function(e){var r=e.getContext("2d"),t=new y.CustomRenderer;t.onProtonUpdate=function(){r.clearRect(0,0,e.width,e.height)},t.onParticleCreated=function(e){e.data.count=y.MathUtil.randomAToB(3,10,!0)},t.onParticleUpdate=function(e){r.save(),r.globalAlpha=e.alpha,r.fillStyle=e.color,r.translate(e.p.x,e.p.y),r.rotate(y.MathUtil.degreeTransform(e.rotation)),r.translate(-e.p.x,-e.p.y),r.beginPath(),n(e,e.data.count),r.closePath(),r.fill(),r.globalAlpha=1,r.restore()},t.onParticleDead=function(e){};var n=function(e,t){if(7<=t)r.arc(e.p.x,e.p.y,e.radius,0,2*Math.PI,!0);else for(var n=e.radius,i=0;i<=t;i++){var o=e.p.x+n*Math.cos(Math.PI/180*360/t*i),a=e.p.y+n*Math.sin(Math.PI/180*360/t*i);0===i?r.moveTo(o,a):r.lineTo(o,a)}};return t}},{key:"createEmitter",value:function(e){var t=e.mainEmitter,n=e.canvas,i=e.x,o=e.y,a=e.radius,r=e.color,s=void 0===r?R:r,d=e.zone,h=void 0===d?"dead":d,u=e.once,l=void 0===u?"all":u,c=e.alpha,p=void 0===c?.85:c,v=e.gravity,f=void 0===v?3.5:v,m=this.proton.pool.get(y.Emitter);if(!m.completed){m.rate=new y.Rate(this.props.num?new y.Span(this.props.num):new y.Span(4,9),new y.Span(1.6,2.2));var w=t?new y.Radius(10,110):new y.Radius(3,a);m.addInitialize(new y.Mass(1)),m.addInitialize(w),m.addInitialize(new y.Life(3,6)),m.addInitialize(new y.Velocity(new y.Span(4,6),new y.Span(-90,90),"polar")),m.addBehaviour(new y.Alpha(p,.2)),m.addBehaviour(new y.Color(s)),m.addBehaviour(new y.Scale(1,.3)),m.addBehaviour(new y.Rotate),m.addBehaviour(new y.Gravity(f)),m.addBehaviour(this.customDeadBehaviour(n)),m.addBehaviour(new y.CrossZone(new y.RectZone(0,0,n.width,n.height),h))}m.p.x=i,m.p.y=o,"once"===l?m.emit("once"):m.emit(),this.proton.addEmitter(m)}},{key:"expireEmitter",value:function(e){var t=this;setTimeout(function(){e.completed=!0,t.proton.pool.expire(e),t.proton.removeEmitter(e)},500)}},{key:"customDeadBehaviour",value:function(t){var n=this;return{initialize:function(e){e.data=e.data||{},e.data.oldRadius=e.radius,e.data.emitterCount=0},applyBehaviour:function(e){e.radius<5||2<=e.data.emitterCount||e.radius<=1/3*e.data.oldRadius&&(e.data.emitterCount++,n.createEmitter({canvas:t,x:e.p.x,y:e.p.y,radius:.5*e.radius,alpha:.5,gravity:5,color:e.color,once:"once"}))}}}},{key:"renderProton",value:function(){this.proton&&this.proton.update()}},{key:"render",value:function(){return a.createElement(u,{globalCompositeOperation:"darker",onCanvasInited:this.onCanvasInited.bind(this),onResize:this.onResize.bind(this)})}}]),t}(a.Component),b=function(e){function n(e){r(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.colors=["#529B88","#CDD180","#FFFA32","#FB6255","#FB4A53","#FF4E50","#F9D423"],t}return d(n,e),s(n,[{key:"componentWillUnmount",value:function(){try{i.remove(this.renderProton),this.proton.destroy()}catch(e){}}},{key:"onCanvasInited",value:function(e,t,n){this.createProton(e,t,n),i.add(this.renderProton)}},{key:"onResize",value:function(){}},{key:"createProton",value:function(e,t,n){this.proton=new y;var i=new y.Emitter;i.rate=new y.Rate(this.props.num?new y.Span(this.props.num):new y.Span(4,8),new y.Span(.1,.25)),i.addInitialize(new y.Mass(1)),i.addInitialize(new y.Radius(20,200)),i.addInitialize(new y.Life(2,4)),i.addInitialize(new y.Velocity(new y.Span(4,7),new y.Span(0,360),"polar")),i.addInitialize(new y.Position(new y.CircleZone(t/2,n/2,100))),i.addBehaviour(new y.Alpha(1,0)),i.addBehaviour(new y.Scale(.2,1)),i.addBehaviour(this.createCustomBehaviour()),i.addBehaviour(new y.Color(this.colors,"random")),i.emit(),this.proton.addEmitter(i);var o=new y.CanvasRenderer(e);this.proton.addRenderer(o)}},{key:"createCustomBehaviour",value:function(){return{initialize:function(e){e.f=new y.Vector2D(0,0)},applyBehaviour:function(e){var t=e.v.length()/1e3,n=e.v.getGradient();n+=1.57,e.f.x=1e3*t*Math.cos(n),e.f.y=1e3*t*Math.sin(n),e.a.add(e.f)}}}},{key:"renderProton",value:function(){this.proton&&this.proton.update()}},{key:"render",value:function(){return a.createElement(u,{globalCompositeOperation:"xor",onCanvasInited:this.onCanvasInited.bind(this),onResize:this.onResize.bind(this)})}}]),n}(a.Component),z=function(e){function t(e){return r(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return d(t,e),s(t,[{key:"getRandom",value:function(e){return this.rand||(this.rand=new n,this.rand.set(.25,a.createElement(c,{num:e})),this.rand.set(.2,a.createElement(l,{num:e})),this.rand.set(.2,a.createElement(p,{num:e})),this.rand.set(.16,a.createElement(v,{num:e})),this.rand.set(.18,a.createElement(w,{num:e})),this.rand.set(.04,a.createElement(m,{num:e})),this.rand.set(.1,a.createElement(C,{num:e})),this.rand.set(.08,a.createElement(f,{num:e})),this.rand.set(.18,a.createElement(g,{num:e})),this.rand.set(.15,a.createElement(b,{num:e}))),this.rand.getResult()}},{key:"getBgParticles",value:function(){var e=this.props,t=e.type,n=e.num,i=void 0;switch(t){case"color":i=a.createElement(c,{num:n});break;case"ball":i=a.createElement(l,{num:n});break;case"lines":i=a.createElement(p,{num:n});break;case"thick":i=a.createElement(v,{num:n});break;case"circle":i=a.createElement(w,{num:n});break;case"cobweb":i=a.createElement(m,{num:n});break;case"polygon":i=a.createElement(C,{num:n});break;case"square":i=a.createElement(f,{num:n});break;case"tadpole":i=a.createElement(g,{num:n});break;case"fountain":i=a.createElement(b,{num:n});break;case"random":i=this.getRandom(n);break;default:i=a.createElement(c,{num:n})}return i}},{key:"render",value:function(){var e=this.getBgParticles();return a.createElement(a.Fragment,null,e)}}]),t}(e.Component);return z.propTypes={type:t.type},z});
//# sourceMappingURL=particles-bg.min.js.map
